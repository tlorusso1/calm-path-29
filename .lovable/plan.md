
# Painel Visual de Fluxo de Caixa - 30 dias

## VisÃ£o Geral

Transformar o modo Financeiro em um painel visual de fluxo de caixa simplificado, focado em projeÃ§Ã£o de 30 dias com feedback visual claro.

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š PREVISÃƒO DE CAIXA â€” 30 DIAS                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. CAIXA ATUAL                                     â”‚
â”‚     NICE FOODS          R$ ________                 â”‚
â”‚     NICE FOODS ECOM     R$ ________                 â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚     TOTAL CAIXA         R$ XX.XXX                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  2. ENTRADAS PREVISTAS                              â”‚
â”‚     Entrada mÃ©dia conservadora    R$ ________       â”‚
â”‚     Entradas jÃ¡ garantidas        R$ ________       â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚     TOTAL ENTRADAS                R$ XX.XXX        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  3. SAÃDAS INEVITÃVEIS                              â”‚
â”‚     Custos fixos mensais          R$ ________       â”‚
â”‚     OperaÃ§Ã£o mÃ­nima               R$ ________       â”‚
â”‚     Impostos estimados            R$ ________       â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚     TOTAL SAÃDAS                  R$ XX.XXX        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  4. RESULTADO                                       â”‚
â”‚     Saldo projetado = Caixa + Entradas - SaÃ­das    â”‚
â”‚                                                     â”‚
â”‚     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ R$ 42.000 (Verde)     â”‚
â”‚                                                     â”‚
â”‚  5. COMPARATIVO VISUAL                              â”‚
â”‚     Caixa Hoje    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ R$ 57.000         â”‚
â”‚     Projetado     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ R$ 42.000         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## MudanÃ§as no Modelo de Dados

### Interface `FinanceiroStage` atualizada

Novos campos a adicionar:

| Campo | Tipo | DescriÃ§Ã£o |
|-------|------|-----------|
| `entradaMediaConservadora` | string | Entrada mÃ©dia conservadora do mÃªs |
| `entradasGarantidas` | string | Entradas jÃ¡ garantidas |
| `custosFixosMensais` | string | Custos fixos mensais |
| `operacaoMinima` | string | Custo de operaÃ§Ã£o mÃ­nima |
| `impostosEstimados` | string | Impostos estimados |

O campo `saidasInevitaveis` serÃ¡ **removido** (substituÃ­do pelos 3 campos detalhados acima).

---

## CÃ¡lculos AutomÃ¡ticos

```text
TOTAL CAIXA = caixaNiceFoods + caixaEcommerce

TOTAL ENTRADAS = entradaMediaConservadora + entradasGarantidas

TOTAL SAÃDAS = custosFixosMensais + operacaoMinima + impostosEstimados

SALDO PROJETADO = TOTAL CAIXA + TOTAL ENTRADAS - TOTAL SAÃDAS
```

---

## Status Visual do Saldo

| CondiÃ§Ã£o | Cor | Status |
|----------|-----|--------|
| Saldo >= R$ 50.000 | Verde | ConfortÃ¡vel |
| Saldo >= R$ 20.000 e < R$ 50.000 | Amarelo | AtenÃ§Ã£o |
| Saldo > R$ 0 e < R$ 20.000 | Laranja | Risco |
| Saldo <= R$ 0 | Vermelho | CrÃ­tico |

---

## GrÃ¡fico Comparativo

Mostrar duas barras horizontais lado a lado:

```text
Caixa Hoje     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘  R$ 57.000
Saldo Projetado â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  R$ 42.000
```

- Barra proporcional ao valor mÃ¡ximo entre os dois
- Cores diferentes para cada barra (azul para atual, cor do status para projetado)

---

## Arquivos a Modificar

### 1. `src/types/focus-mode.ts`

```typescript
export interface FinanceiroStage {
  // Caixa separado por empresa
  caixaNiceFoods: string;
  caixaEcommerce: string;
  
  // NOVOS: Entradas previstas
  entradaMediaConservadora: string;
  entradasGarantidas: string;
  
  // NOVOS: SaÃ­das detalhadas (substitui saidasInevitaveis)
  custosFixosMensais: string;
  operacaoMinima: string;
  impostosEstimados: string;
  
  // VerificaÃ§Ãµes simplificadas (mantido)
  vencimentos: {
    dda: boolean;
    email: boolean;
    whatsapp: boolean;
    planilha: boolean;
  };
  
  // Itens de vencimento (mantido)
  itensVencimento: ChecklistItem[];
  
  // Agendamento (mantido)
  agendamentoConfirmado: boolean;
  
  // DecisÃµes como texto livre (mantido)
  decisaoPagar: string;
  decisaoSegurar: string;
  decisaoRenegociar: string;
}
```

Atualizar `DEFAULT_FINANCEIRO_DATA`:

```typescript
export const DEFAULT_FINANCEIRO_DATA: FinanceiroStage = {
  caixaNiceFoods: '',
  caixaEcommerce: '',
  entradaMediaConservadora: '',
  entradasGarantidas: '',
  custosFixosMensais: '',
  operacaoMinima: '',
  impostosEstimados: '',
  vencimentos: { ... },
  itensVencimento: [],
  agendamentoConfirmado: false,
  decisaoPagar: '',
  decisaoSegurar: '',
  decisaoRenegociar: '',
};
```

### 2. `src/components/modes/FinanceiroMode.tsx`

Reestruturar completamente para o novo layout:

```text
SEÃ‡ÃƒO: PrevisÃ£o de Caixa â€” 30 dias
â”œâ”€â”€ Card principal com borda destacada
â”‚
â”œâ”€â”€ Bloco 1: CAIXA ATUAL
â”‚   â”œâ”€â”€ Input: NICE FOODS
â”‚   â”œâ”€â”€ Input: NICE FOODS ECOM
â”‚   â””â”€â”€ TOTAL CAIXA (calculado)
â”‚
â”œâ”€â”€ Bloco 2: ENTRADAS PREVISTAS
â”‚   â”œâ”€â”€ Input: Entrada mÃ©dia conservadora
â”‚   â”œâ”€â”€ Input: Entradas jÃ¡ garantidas
â”‚   â””â”€â”€ TOTAL ENTRADAS (calculado)
â”‚
â”œâ”€â”€ Bloco 3: SAÃDAS INEVITÃVEIS
â”‚   â”œâ”€â”€ Input: Custos fixos mensais
â”‚   â”œâ”€â”€ Input: OperaÃ§Ã£o mÃ­nima
â”‚   â”œâ”€â”€ Input: Impostos estimados
â”‚   â””â”€â”€ TOTAL SAÃDAS (calculado)
â”‚
â”œâ”€â”€ Bloco 4: RESULTADO
â”‚   â”œâ”€â”€ Saldo projetado (calculado)
â”‚   â”œâ”€â”€ Barra de progresso colorida
â”‚   â””â”€â”€ Status textual
â”‚
â””â”€â”€ Bloco 5: COMPARATIVO VISUAL
    â”œâ”€â”€ Barra: Caixa Hoje
    â””â”€â”€ Barra: Saldo Projetado

SEÃ‡ÃƒO: Checklist de ExecuÃ§Ã£o (mantido)
SEÃ‡ÃƒO: DecisÃ£o da Semana (mantido)
```

### 3. `src/utils/modeStatusCalculator.ts`

Atualizar campos verificados:

```typescript
export function calculateFinanceiroStatus(data?: FinanceiroStage): ModeStatus {
  if (!data) return 'neutral';
  
  const fields = [
    (data.caixaNiceFoods ?? '').trim() !== '',
    (data.caixaEcommerce ?? '').trim() !== '',
    // Novos campos de entradas
    (data.entradaMediaConservadora ?? '').trim() !== '' ||
      (data.entradasGarantidas ?? '').trim() !== '',
    // Novos campos de saÃ­das
    (data.custosFixosMensais ?? '').trim() !== '' ||
      (data.operacaoMinima ?? '').trim() !== '' ||
      (data.impostosEstimados ?? '').trim() !== '',
    // Checklist continua igual
    (data.vencimentos?.dda || data.vencimentos?.email || 
      data.vencimentos?.whatsapp || data.vencimentos?.planilha) ?? false,
  ];
  
  const filled = fields.filter(Boolean).length;
  if (filled === 0) return 'neutral';
  if (filled === fields.length) return 'completed';
  return 'in-progress';
}
```

---

## Detalhes TÃ©cnicos

### FunÃ§Ã£o de Status Visual

```typescript
const getSaldoStatus = (saldo: number) => {
  if (saldo >= 50000) return { 
    color: 'bg-green-500', 
    textColor: 'text-green-600',
    label: 'ConfortÃ¡vel'
  };
  if (saldo >= 20000) return { 
    color: 'bg-yellow-500', 
    textColor: 'text-yellow-600',
    label: 'AtenÃ§Ã£o'
  };
  if (saldo > 0) return { 
    color: 'bg-orange-500', 
    textColor: 'text-orange-600',
    label: 'Risco'
  };
  return { 
    color: 'bg-red-500', 
    textColor: 'text-red-600',
    label: 'CrÃ­tico'
  };
};
```

### Componente de Barra Comparativa

```typescript
const BarraComparativa = ({ 
  label, 
  valor, 
  maxValor, 
  corClasse 
}: { 
  label: string; 
  valor: number; 
  maxValor: number; 
  corClasse: string;
}) => {
  const percentage = maxValor > 0 ? (valor / maxValor) * 100 : 0;
  
  return (
    <div className="space-y-1">
      <div className="flex justify-between text-sm">
        <span>{label}</span>
        <span className="font-medium">{formatCurrency(valor)}</span>
      </div>
      <div className="h-3 bg-muted rounded-full overflow-hidden">
        <div 
          className={cn("h-full rounded-full transition-all", corClasse)}
          style={{ width: `${Math.min(percentage, 100)}%` }}
        />
      </div>
    </div>
  );
};
```

---

## Compatibilidade com Dados Existentes

- O campo `saidasInevitaveis` serÃ¡ mantido temporariamente para compatibilidade
- Novos campos terÃ£o valor default vazio
- Dados existentes continuarÃ£o funcionando

---

## Resultado Visual Esperado

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š PREVISÃƒO DE CAIXA â€” 30 DIAS                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€ CAIXA ATUAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  NICE FOODS              R$ 45.000,00               â”‚â”‚
â”‚  â”‚  NICE FOODS ECOM         R$ 12.000,00               â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚â”‚
â”‚  â”‚  TOTAL                   R$ 57.000,00               â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€ ENTRADAS PREVISTAS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Entrada mÃ©dia conservadora    R$ 80.000,00         â”‚â”‚
â”‚  â”‚  Entradas jÃ¡ garantidas        R$ 25.000,00         â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚â”‚
â”‚  â”‚  TOTAL                         R$ 105.000,00        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€ SAÃDAS INEVITÃVEIS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Custos fixos mensais          R$ 45.000,00         â”‚â”‚
â”‚  â”‚  OperaÃ§Ã£o mÃ­nima               R$ 30.000,00         â”‚â”‚
â”‚  â”‚  Impostos estimados            R$ 15.000,00         â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚â”‚
â”‚  â”‚  TOTAL                         R$ 90.000,00         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€ RESULTADO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                     â”‚â”‚
â”‚  â”‚  SALDO PROJETADO              R$ 72.000,00          â”‚â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ (verde)               â”‚â”‚
â”‚  â”‚  âœ“ ConfortÃ¡vel                                      â”‚â”‚
â”‚  â”‚                                                     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€ COMPARATIVO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Caixa Hoje     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘ R$ 57.000           â”‚â”‚
â”‚  â”‚  Projetado      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘ R$ 72.000 â†‘        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                         â”‚
â”‚  "Este painel governa as decisÃµes da semana."           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## SeÃ§Ãµes Mantidas (Abaixo do Painel)

O **Checklist de ExecuÃ§Ã£o** e **DecisÃ£o da Semana** continuam como estÃ£o, abaixo do novo painel de previsÃ£o de caixa.
